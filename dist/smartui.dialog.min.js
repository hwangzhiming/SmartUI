"use strict";!function(e,t){t.sui=t.sui||{},t.sui.modal=function(t){var n=e.extend({theme:"default",type:"info",title:"Title",message:"Thanks for try SmartUI!",buttons:[],opened:null},t),i=e('<div class="smart-ui smart-ui-modal smart-ui-modal-'+n.theme+'"/>'),s=e('<div class="smart-ui-modal-content"/>'),o=e('<div class="smart-ui-modal-sign '+n.type+'"><span></span></div>'),a=e('<div class="smart-ui-modal-close">CLOSE</div>'),r=e('<div class="smart-ui-modal-title">'+n.title+"</div>"),u=e('<div class="smart-ui-modal-placeholder"></div>');if(u.append(n.message),n.buttons&&n.buttons.length){for(var l=e('<div class="smart-ui-modal-buttons"></div>'),d=function(t){var s=n.buttons[t],o=e('<button class="smart-ui-modal-button '+s.type+'">'+s.text+"</button>");s.func&&o.on("click",function(){return s.func.apply(null,[i])}),l.append(o)},m=0;m<n.buttons.length;m++)d(m);u.append(l)}return s.append([o,a,r,u]),i.append(s).appendTo(e("body")),i.open=function(){i.addClass("opened"),n.opened&&"function"==typeof n.opened&&n.opened(i)},i.disable=function(){i.find("input,button").attr("disabled","disabled")},i.enable=function(){i.find("input,button").removeAttr("disabled")},i.close=function(){i.removeClass("opened"),setTimeout(function(){i.remove()},200)},i.placeholder=u,a.on("click",i.close),setTimeout(i.open,0),i},t.sui.alert=function(t){var n=jQuery.Deferred();"string"==typeof t&&(t={message:t});var i=void 0,s=e.extend({theme:"default",type:"info",title:"Alert",message:"This is alert!",button:{type:"default",text:"OK"}},t);s.button.func=function(){i.close(),n.resolve(i)};var o=e("<div></div>"),a=e("<p>"+s.message+"</p>");return o.append([a]),i=this.modal({type:s.type,title:s.title,theme:s.theme,message:o,buttons:[s.button]}),n.promise()},t.sui.confirm=function(t){var n=jQuery.Deferred();"string"==typeof t&&(t={message:t});var i=void 0,s=e.extend({theme:"default",type:"question",title:"Confirm",message:"This is confirm!",confirm:{type:"info",text:"OK"},cancel:{type:"default",text:"Cancel"}},t);s.confirm.func=function(){i.close(),n.resolve(i)},s.cancel.func=function(){i.close(),n.reject(i)};var o=e("<div></div>"),a=e("<p>"+s.message+"</p>");return o.append([a]),i=this.modal({type:s.type,title:s.title,theme:s.theme,message:o,buttons:[s.confirm,s.cancel]}),n.promise()},t.sui.prompt=function(t){var n=jQuery.Deferred(),i=void 0,s=void 0,o=e.extend({theme:"default",type:"question",title:"Prompt",message:"This is Prompt!",fieldType:"text",maxLength:null,required:!0,pattern:null,action:null,button:{type:"primary",text:"OK"}},t),a=function(e){var t=function(e,t){return e?s.addClass(t):s.removeClass(t),e};if(t(o.required&&!e,"sui-error sui-require"))return!1;if(o.pattern){var n=new RegExp(o.pattern,"ig");if(t(!n.test(e),"sui-error sui-pattern-error"))return!1}return!o.maxLength||!t(e.length>o.maxLength,"sui-error sui-max-length-error")};o.button.func=function(){var e=s.val();if(!a(e))return void s.focus();if(o.action){i.disable();var t=o.action(e);t&&t.then&&t.then(function(){n.resolve(e,i),i.close()},function(e){i.enable()})}else n.resolve(e,i),i.close()};var r={type:"default",text:"Cancel",func:function(e){n.reject(),e.close()}},u=e("<div></div>"),l=e("<p>"+o.message+"</p>");return s=e('<input class="smart-ui-modal-form-field" type="'+o.fieldType+'" maxlength="'+o.maxLength+'"/>'),s.on("keyup",function(){var e=s.val();a(e)}),u.append([l,s]),i=this.modal({type:o.type,title:o.title,theme:o.theme,message:u,buttons:[o.button,r]}),n.promise()},t.sui.masterPassword=function(t){var n=jQuery.Deferred(),i=void 0,s=void 0,o=e.extend({theme:"default",type:"question",title:"Master Password",message:"Please enter your master password!",fieldType:"password",maxLength:4,required:!0,action:null,autoSubmit:!0},t),a=function(){var e=s.val();if((!o.required||e)&&!(o.maxLength&&e.length<o.maxLength))if(o.action){i.disable();var t=o.action(e);t&&t.then&&t.then(function(){n.resolve(e,i),i.close()},function(){i.enable()})}else n.resolve(e,i),i.close()},r=e("<div></div>");o.button?o.button.func=function(){a()}:r.addClass("no-buttons");var u=e("<p>"+o.message+"</p>");return s=e('<input class="smart-ui-modal-form-field" autofocus="true" type="'+o.fieldType+'" maxlength="'+o.fieldMaxLength+'"/>'),r.append([u,s]),i=this.modal({type:o.type,title:o.title,theme:o.theme,message:r,buttons:o.button?[o.button]:[],opened:function(e){setTimeout(function(){e.find("input.smart-ui-master-password-field").eq(0).focus()},200)}}),s.masterPassword({callback:function(){var e=s.val();e&&o.maxLength&&e.length==o.maxLength&&o.autoSubmit&&a()}}),n.promise()}}(jQuery,window);