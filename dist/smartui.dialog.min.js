"use strict";!function(e,t){t.sui=t.sui||{},t.sui.modal=function(t){var n=e.extend({theme:"smart-ui-modal-default",type:"info",title:"Title",message:"Thanks for try SmartUI!",buttons:[]},t),a=e('<div class="smart-ui smart-ui-modal '+n.theme+'"/>'),s=e('<div class="smart-ui-modal-content"/>'),i=e('<div class="smart-ui-modal-sign '+n.type+'"><span></span></div>'),o=e('<div class="smart-ui-modal-close">CLOSE</div>'),r=e('<div class="smart-ui-modal-title">'+n.title+"</div>"),u=e('<div class="smart-ui-modal-placeholder"></div>');if(u.append(n.message),n.buttons&&n.buttons.length){for(var l=e('<div class="smart-ui-modal-buttons"></div>'),d=function(t){var s=n.buttons[t],i=e('<button class="smart-ui-modal-button '+s.type+'">'+s.text+"</button>");s.func&&i.on("click",function(){return s.func.apply(null,[a])}),l.append(i)},m=0;m<n.buttons.length;m++)d(m);u.append(l)}return s.append([i,o,r,u]),a.append(s).appendTo(e("body")),a.open=function(){a.addClass("opened")},a.close=function(){a.removeClass("opened"),setTimeout(function(){a.remove()},200)},o.on("click",a.close),setTimeout(a.open,0),a},t.sui.alert=function(t){var n=jQuery.Deferred();"string"==typeof t&&(t={message:t});var a=void 0,s=e.extend({theme:"smart-ui-modal-default",type:"info",title:"Alert",message:"This is alert!",button:{type:"default",text:"OK"}},t);s.button.func=function(){a.close(),n.resolve()};var i=e("<div></div>"),o=e("<p>"+s.message+"</p>");return i.append([o]),a=this.modal({type:s.type,title:s.title,theme:s.theme,message:i,buttons:[s.button]}),n.promise()},t.sui.prompt=function(t){var n=jQuery.Deferred(),a=void 0,s=void 0,i=e.extend({theme:"smart-ui-modal-default",type:"question",title:"Prompt",message:"This is Prompt!",fieldType:"text",maxLength:null,required:!0,pattern:null,action:null,button:{type:"warning",text:"OK"}},t),o=function(e){var t=function(e,t){return e?s.addClass(t):s.removeClass(t),e};if(t(i.required&&!e,"sui-error sui-require"))return!1;if(i.pattern){var n=new RegExp(i.pattern,"ig");if(t(!n.test(e),"sui-error sui-pattern-error"))return!1}return!i.maxLength||!t(e.length>i.maxLength,"sui-error sui-max-length-error")};i.button.func=function(){var e=s.val();if(!o(e))return void s.focus();if(i.action){var t=i.action(e);t&&t.then&&t.then(function(){n.resolve(e),a.close()})}else n.resolve(e),a.close()};var r={type:"default",text:"Cancel",func:function(e){n.reject(),e.close()}},u=e("<div></div>"),l=e("<p>"+i.message+"</p>");return s=e('<input class="smart-ui-modal-form-field" type="'+i.fieldType+'" maxlength="'+i.maxLength+'"/>'),s.on("keyup",function(){var e=s.val();o(e)}),u.append([l,s]),a=this.modal({type:i.type,title:i.title,theme:i.theme,message:u,buttons:[r,i.button]}),n.promise()},t.sui.masterPassword=function(t){var n=jQuery.Deferred(),a=void 0,s=void 0,i=e.extend({theme:"smart-ui-modal-default",type:"question",title:"Master Password",message:"Please enter your master password!",fieldType:"password",maxLength:4,required:!0,action:null,autoSubmit:!0},t),o=function(){var e=s.val();if((!i.required||e)&&!(i.maxLength&&e.length<i.maxLength))if(i.action){var t=i.action(e);t&&t.then&&t.then(function(){n.resolve(e),a.close()})}else n.resolve(e),a.close()},r=e("<div></div>");i.button?i.button.func=function(){o()}:r.addClass("no-buttons");var u=e("<p>"+i.message+"</p>");return s=e('<input class="smart-ui-modal-form-field" autofocus="true" type="'+i.fieldType+'" maxlength="'+i.fieldMaxLength+'"/>'),r.append([u,s]),a=this.modal({type:i.type,title:i.title,theme:i.theme,message:r,buttons:i.button?[i.button]:[]}),s.masterPassword({callback:function(){var e=s.val();e&&i.maxLength&&e.length==i.maxLength&&o()}}),n.promise()}}(jQuery,window);