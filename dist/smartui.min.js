"use strict";!function(e,t){t.sui=t.sui||{},t.sui.modal=function(t){var n=e.extend({theme:"default",type:"info",title:"Title",message:"Thanks for try SmartUI!",buttons:[]},t),i=e('<div class="smart-ui smart-ui-modal smart-ui-modal-'+n.theme+'"/>'),a=e('<div class="smart-ui-modal-content"/>'),s=e('<div class="smart-ui-modal-sign '+n.type+'"><span></span></div>'),o=e('<div class="smart-ui-modal-close">CLOSE</div>'),r=e('<div class="smart-ui-modal-title">'+n.title+"</div>"),u=e('<div class="smart-ui-modal-placeholder"></div>');if(u.append(n.message),n.buttons&&n.buttons.length){for(var l=e('<div class="smart-ui-modal-buttons"></div>'),d=function(t){var a=n.buttons[t],s=e('<button class="smart-ui-modal-button '+a.type+'">'+a.text+"</button>");a.func&&s.on("click",function(){return a.func.apply(null,[i])}),l.append(s)},m=0;m<n.buttons.length;m++)d(m);u.append(l)}return a.append([s,o,r,u]),i.append(a).appendTo(e("body")),i.open=function(){i.addClass("opened")},i.disable=function(){i.find("input,button").attr("disabled","disabled")},i.enable=function(){i.find("input,button").removeAttr("disabled")},i.close=function(){i.removeClass("opened"),setTimeout(function(){i.remove()},200)},i.placeholder=u,o.on("click",i.close),setTimeout(i.open,0),i},t.sui.alert=function(t){var n=jQuery.Deferred();"string"==typeof t&&(t={message:t});var i=void 0,a=e.extend({theme:"default",type:"info",title:"Alert",message:"This is alert!",button:{type:"default",text:"OK"}},t);a.button.func=function(){i.close(),n.resolve(i)};var s=e("<div></div>"),o=e("<p>"+a.message+"</p>");return s.append([o]),i=this.modal({type:a.type,title:a.title,theme:a.theme,message:s,buttons:[a.button]}),n.promise()},t.sui.confirm=function(t){var n=jQuery.Deferred();"string"==typeof t&&(t={message:t});var i=void 0,a=e.extend({theme:"default",type:"question",title:"Confirm",message:"This is confirm!",confirm:{type:"info",text:"OK"},cancel:{type:"default",text:"Cancel"}},t);a.confirm.func=function(){i.close(),n.resolve(i)},a.cancel.func=function(){i.close(),n.reject(i)};var s=e("<div></div>"),o=e("<p>"+a.message+"</p>");return s.append([o]),i=this.modal({type:a.type,title:a.title,theme:a.theme,message:s,buttons:[a.confirm,a.cancel]}),n.promise()},t.sui.prompt=function(t){var n=jQuery.Deferred(),i=void 0,a=void 0,s=e.extend({theme:"default",type:"question",title:"Prompt",message:"This is Prompt!",fieldType:"text",maxLength:null,required:!0,pattern:null,action:null,button:{type:"primary",text:"OK"}},t),o=function(e){var t=function(e,t){return e?a.addClass(t):a.removeClass(t),e};if(t(s.required&&!e,"sui-error sui-require"))return!1;if(s.pattern){var n=new RegExp(s.pattern,"ig");if(t(!n.test(e),"sui-error sui-pattern-error"))return!1}return!s.maxLength||!t(e.length>s.maxLength,"sui-error sui-max-length-error")};s.button.func=function(){var e=a.val();if(!o(e))return void a.focus();if(s.action){i.disable();var t=s.action(e);t&&t.then&&t.then(function(){n.resolve(e,i),i.close()},function(e){i.enable()})}else n.resolve(e,i),i.close()};var r={type:"default",text:"Cancel",func:function(e){n.reject(),e.close()}},u=e("<div></div>"),l=e("<p>"+s.message+"</p>");return a=e('<input class="smart-ui-modal-form-field" type="'+s.fieldType+'" maxlength="'+s.maxLength+'"/>'),a.on("keyup",function(){var e=a.val();o(e)}),u.append([l,a]),i=this.modal({type:s.type,title:s.title,theme:s.theme,message:u,buttons:[s.button,r]}),n.promise()},t.sui.masterPassword=function(t){var n=jQuery.Deferred(),i=void 0,a=void 0,s=e.extend({theme:"default",type:"question",title:"Master Password",message:"Please enter your master password!",fieldType:"password",maxLength:4,required:!0,action:null,autoSubmit:!0},t),o=function(){var e=a.val();if((!s.required||e)&&!(s.maxLength&&e.length<s.maxLength))if(s.action){i.disable();var t=s.action(e);t&&t.then&&t.then(function(){n.resolve(e,i),i.close()},function(){i.enable()})}else n.resolve(e,i),i.close()},r=e("<div></div>");s.button?s.button.func=function(){o()}:r.addClass("no-buttons");var u=e("<p>"+s.message+"</p>");return a=e('<input class="smart-ui-modal-form-field" autofocus="true" type="'+s.fieldType+'" maxlength="'+s.fieldMaxLength+'"/>'),r.append([u,a]),i=this.modal({type:s.type,title:s.title,theme:s.theme,message:r,buttons:s.button?[s.button]:[]}),a.masterPassword({callback:function(){var e=a.val();e&&s.maxLength&&e.length==s.maxLength&&s.autoSubmit&&o()}}),n.promise()}}(jQuery,window);
"use strict";!function(a){a.fn.masterPassword=function(t){var e=a.extend({callback:null},t),r=function(t,e){if(t.hide(),!t.data("inited")){for(var r=0,s=parseInt(t.attr("length")||"4"),n=!!t.attr("autofocus"),i=t.attr("theme")||"smart-ui-master-password-theme-default",u=a('<div class="smart-ui smart-ui-master-password '+i+'"></div>'),l=[],c=function(){for(var a=[],r=0;r<l.length;r++)a.push(l[r].val());var n=a.join("");t.val(n),n.length===s&&e.callback&&e.callback(n)},o=0;o<s;o++){var f=a('<input class="smart-ui-master-password-field" maxlength="1" data-id="'+o+'" type="'+t.attr("type")+'"/>');f.on("focus",function(t){r=a(t.currentTarget).data("id")}),f.on("keyup",function(a){var t=a.which||a.keyCode;if(t>=48&&t<=57||t>=96&&t<=105)l[r].val(a.key),r<s-1?l[++r].focus():l[r].blur();else if(8===t){var e=l[r];e.val()?e.val(""):r>0&&(e=l[--r],e.val("").focus())}else l[r].val("").focus();c()}),l.push(f),u.append(f)}return t.after(u),n&&l.length&&l[0].focus(),t.data("inited",!0),t}};a(this).each(function(t,s){r(a(s),e)})}}(jQuery);